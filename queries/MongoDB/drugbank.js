db.sub.aggregate([  {"$addFields": { "OPT1" : { "$cond": { if: { "$not" : ["$brandName"]}, then:[ ] , else:"$brandName" }}}} ,{"$match":{ "label" : {"$exists": true}}},{"$match":{ "type" :  "drugs"}},{ "$limit":  100}]).pretty()
db.sub.aggregate([  {"$addFields": { "OPT1" : { "$cond": { if: { "$not" : ["$brandName"]}, then:[ ] , else:"$brandName" }}}} ,{"$match":{ "label" : {"$exists": true}}},{"$match":{ "type" :  "drugs"}},{  "$sort": {"label": 1,"OPT1.brandName": 1}},{  "$skip":  100},{ "$limit":  100}]).pretty()
db.sub.aggregate([ {"$match":{ "interactionDrug2" : {"$exists": true}}},{"$match":{ "text" : {"$exists": true}}},{$match:{"interactionDrug1":{$exists:true}}}, {"$lookup":{from:"sub", localField:"interactionDrug1",foreignField:"idPrimaryKey", as: "sojoin11" }} ,{"$match":{ "sojoin11.sameAs" : {"$exists": true}}},{  "$skip":  100},{ "$limit":  100}]).pretty()
b.sub.aggregate([ {"$match":{ "interactionDrug2" : {"$exists": true}}},{"$match":{ "text" : {"$exists": true}}},{$match:{"interactionDrug1":{$exists:true}}}, {"$lookup":{from:"sub", localField:"interactionDrug1",foreignField:"idPrimaryKey", as: "sojoin11" }}, {$unwind:"$sojoin11"} ,{"$match":{ "sojoin11.brandMixture" : {"$exists": true}}},{"$match":{ "sojoin11.atcCode" : {"$exists": true}}},{"$match":{ "sojoin11.casRegistryNumber" : {"$exists": true}}},{"$match":{ "sojoin11.chemicalFormula" : {"$exists": true}}},{"$match":{ "sojoin11.meltingPoint" : {"$exists": true}}},{"$match":{ "sojoin11.sameAs" : {"$exists": true}}},{"$match":{ "sojoin11.biotransformation" : {"$exists": true}}},{"$match":{ "sojoin11.brandName" : {"$exists": true}}},{"$match":{ "sojoin11.ahfsCode" : {"$exists": true}}},{"$match":{ "sojoin11.absorption" : {"$exists": true}}},{"$match":{ "sojoin11.affectedOrganism" : {"$exists": true}}},{ "$addFields": { "key_01" :{ "$ne":[ "$sojoin11.atcCode", "J01CE02" ] }}},{"$match": { "$or" : [ {   "key_01" : true   }, { "sojoin11.atcCode" : [ ]  } ] }}  ,{ "$addFields": { "key_02" :{ "$eq":[ "$sojoin11.atcCode", "D07AC16" ] }}},{"$match": { "key_02" : false   }  }, {"$addFields": {  "key_03" : "$key_02"   }  }  ,{ "$addFields": { "key_04" :{ "$or":[ "key_01", "key_03" ] }}},{"$match": { "key_04" : true   }  }  ,{  "$skip":  100},{ "$limit":  100}]).pretty()
db.sub.aggregate([ {"$match":{ "interactionDrug2" : {"$exists": true}}},{"$match":{ "text" : {"$exists": true}}},{$match:{"interactionDrug1":{$exists:true}}}, {"$lookup":{from:"sub", localField:"interactionDrug1",foreignField:"idPrimaryKey", as: "sojoin11" }},{$unwind: "$sojoin11"} ,{"$match":{ "sojoin11.brandMixture" : {"$exists": true}}},{"$match":{ "sojoin11.atcCode" : {"$exists": true}}},{"$match":{ "sojoin11.casRegistryNumber" : {"$exists": true}}},{"$match":{ "sojoin11.chemicalFormula" : {"$exists": true}}},{"$match":{ "sojoin11.meltingPoint" : {"$exists": true}}},{"$match":{ "sojoin11.biotransformation" : {"$exists": true}}},{"$match":{ "sojoin11.brandName" : {"$exists": true}}},{"$match":{ "sojoin11.ahfsCode" : {"$exists": true}}},{"$match":{ "sojoin11.absorption" : {"$exists": true}}},{"$match":{ "sojoin11.affectedOrganism" : {"$exists": true}}},{$match:{"sojoin11.sameAs":{$exists:true}}}, {"$lookup":{from:"sub", localField:"sojoin11.sameAs",foreignField:"idPrimaryKey", as: "sojoin11.sojoin22" }} ,{  "$skip":  100},{ "$limit":  100}]).pretty()
